# Этапы проекта Magnit

## Документ: План разработки кабельной системы БОГЭКС / Лаб.К-03

---

## Этап 1: Научно-исследовательские работы (НИР)

### 1.1. Теоретическое обоснование

**Цель:** Исследование принципов резонансной передачи энергии по однопроводниковой линии.

**Задачи:**
- [ ] Изучение теории стоячих волн в разомкнутых линиях
- [ ] Анализ работ Н. Тесла по однопроводниковой передаче
- [ ] Расчёт оптимальных частот для передачи энергии (1-100 кГц)
- [ ] Моделирование электромагнитных процессов в линии
- [ ] Разработка компьютерной модели теории работы ТВЧ передачи

**Результаты:**
- Формулы расчёта параметров системы
- Теоретическое обоснование выбора частоты
- Модель распределения энергии в линии

### 1.2. Патентный поиск

**Задачи:**
- [ ] Анализ патентов US4309072, US20090317039, US20140099472
- [ ] Исследование технологии CurTran LiteWire
- [ ] Поиск решений по защитным оболочкам для оптоволокна
- [ ] Изучение композитных материалов с нанотрубками

---

## Этап 2: Опытно-конструкторские работы (ОКР)

### 2.1. Разработка передающего преобразователя

**Технические требования:**
```
Входное напряжение:      ~220В, 50Гц
Выходное напряжение:     900В
Частота на выходе:       1-8 кГц
Мощность:                200 Вт (с резервом)
Габариты:                ø190 × 250 мм
```

**Задачи:**
- [ ] Разработка принципиальной схемы
- [ ] Выбор элементной базы (IGBT транзисторы, TL494)
- [ ] Проектирование высокочастотного трансформатора Тесла
- [ ] Разработка системы контроля резонанса
- [ ] Проектирование автомата отсечки
- [ ] Создание планарной схемы для уменьшения габаритов

**Конструкторская документация:**
- Принципиальная схема с номиналами элементов
- Параметры трансформаторов
- Спецификация компонентов

### 2.2. Разработка обратного (приёмного) преобразователя

**Технические требования:**
```
Входное напряжение:      900В, 1-8 кГц
Выходное напряжение:     22-36В DC
Мощность:                200 Вт
Габариты:                ø60 × 200 мм
```

**Задачи:**
- [ ] Разработка схемы выпрямителя
- [ ] Проектирование системы стабилизации напряжения
- [ ] Разработка защиты от перенапряжения
- [ ] Обеспечение питания аккумулятора при отказе приёмника
- [ ] Герметизация для подводного применения

### 2.3. Разработка кабельной системы

**Характеристики кабеля Лаб.К-03:**
```
Диаметр:                 1.5-3 мм
Вес:                     3-7 кг/км
Состав:                  2 электрических + 2 оптоволоконных проводника
Длина рабочей модели:    1240 м
```

**Задачи:**
- [ ] Разработка конструкции кабеля с ВИЭСХ
- [ ] Выбор материала проводников (медь/углеродные нанотрубки)
- [ ] Разработка бронированной оболочки с БКС
- [ ] Интеграция оптоволокна для передачи данных
- [ ] Обеспечение плавучести/нейтральной плавучести
- [ ] Испытания кабеля во ВНИИКП

---

## Этап 3: Изготовление и сборка

### 3.1. Изготовление передатчика

**Задачи:**
- [ ] Закупка комплектующих
- [ ] Изготовление печатных плат
- [ ] Намотка трансформаторов
- [ ] Сборка и монтаж
- [ ] Размещение в корпусе катушки

### 3.2. Изготовление приёмника

**Задачи:**
- [ ] Изготовление корпуса ø60 × 200 мм
- [ ] Сборка электроники
- [ ] Герметизация для подводного применения
- [ ] Интеграция с системой управления ROV

### 3.3. Изготовление кабеля

**Задачи:**
- [ ] Заказ кабеля в ОКБ КП
- [ ] Заказ оболочки в БКС
- [ ] Сборка и испытания образца 1240 м
- [ ] Намотка на катушку (reel)

---

## Этап 4: Испытания

### 4.1. Лабораторные испытания

**Задачи:**
- [ ] Проверка резонансной настройки системы
- [ ] Измерение КПД передачи
- [ ] Тестирование на различных частотах (1-8 кГц)
- [ ] Проверка работы защитных систем
- [ ] Измерение уровня излучения

**Параметры испытаний:**
- Испытательная длина: 450-1250 м
- Нагрузка: лампы накаливания 24 × 1 кВт
- Частота: 3.4 кГц (резонансная)

### 4.2. Полевые испытания

**Задачи:**
- [ ] Испытания на воде
- [ ] Проверка работы с подводным аппаратом
- [ ] Тестирование в условиях низких температур
- [ ] Проверка механической прочности кабеля

### 4.3. Сертификационные испытания

**Задачи:**
- [ ] Получение санитарно-эпидемиологических заключений
- [ ] Испытания на электромагнитную совместимость
- [ ] Сертификация для работы на воде
- [ ] Оформление документов для РЖД/космоса/дирижаблей

---

## Этап 5: Документирование

### 5.1. Техническая документация

**Перечень документов:**
- [ ] Паспорт на систему передачи электроэнергии
- [ ] Принципиальные схемы с номиналами
- [ ] Конструкторская документация
- [ ] Руководство по эксплуатации
- [ ] Инструкция по настройке резонанса
- [ ] Спецификация трансформаторов

### 5.2. Научно-технический отчёт

**Содержание:**
- [ ] Теоретическое обоснование
- [ ] Описание конструкции
- [ ] Результаты испытаний
- [ ] Выводы и рекомендации

### 5.3. Патентование

**Задачи:**
- [ ] Патент на дублированную систему по одной оплетке
- [ ] Патент на витую пару без коаксиала
- [ ] Патент на широкополосный канал передачи
- [ ] Регистрация торговой марки

---

## Этап 6: Внедрение и производство

### 6.1. Опытная серия

**Задачи:**
- [ ] Изготовление 5 комплектов системы
- [ ] Подготовка к серийному производству
- [ ] Разработка технологической документации
- [ ] Обучение персонала

### 6.2. Коммерциализация

**Задачи:**
- [ ] Создание франчайзинговой модели производства
- [ ] Выход на российский рынок
- [ ] Подготовка к международным выставкам
- [ ] Публикации и пресс-релизы

---

---

## Этап 7: Разработка цезиевого магнитометра (BlueOS)

### 7.1. Аппаратная часть

**Цель:** Разработка системы сбора данных магнитометра на STM32.

**Технические требования:**
```
Микроконтроллер:         STM32F4xx / STM32H7xx
Интерфейс:               UART (115200 baud)
Протокол:                Custom binary (CRC16-CCITT)
Частота измерений:       1-1000 Гц
Диапазон:                20 000 - 100 000 нТл
Разрешение:              0.001 нТл
```

**Задачи:**
- [x] Разработка протокола обмена данными STM32
- [x] Реализация команд управления и калибровки
- [ ] Разработка схемы подключения датчика
- [ ] Изготовление печатной платы
- [ ] Тестирование с реальным датчиком

### 7.2. Программная часть (Python)

**Цель:** Разработка модуля для BlueOS с AI-обработкой.

**Архитектура:**
```
┌─────────────────────────────────────────────────────────┐
│                    BlueOS Extension                      │
│  ┌─────────────┐  ┌──────────────┐  ┌───────────────┐  │
│  │  REST API   │  │  WebSocket   │  │   MAVLink     │  │
│  └──────┬──────┘  └──────┬───────┘  └───────┬───────┘  │
│         │                │                   │          │
│  ┌──────┴────────────────┴───────────────────┴───────┐  │
│  │              CesiumMagnetometer                    │  │
│  │  ┌─────────────┐  ┌─────────────┐  ┌───────────┐  │  │
│  │  │ KalmanFilter│  │ Calibration │  │ Statistics│  │  │
│  │  └─────────────┘  └─────────────┘  └───────────┘  │  │
│  └──────────────────────┬────────────────────────────┘  │
│                         │                               │
│  ┌──────────────────────┴────────────────────────────┐  │
│  │               HailoProcessor (AI)                  │  │
│  │  ┌─────────────┐  ┌─────────────┐  ┌───────────┐  │  │
│  │  │   Denoise   │  │  Anomaly    │  │ Classify  │  │  │
│  │  │   Model     │  │  Detection  │  │  Model    │  │  │
│  │  └─────────────┘  └─────────────┘  └───────────┘  │  │
│  └──────────────────────┬────────────────────────────┘  │
│                         │                               │
│  ┌──────────────────────┴────────────────────────────┐  │
│  │                 STM32Driver                        │  │
│  │         Serial Communication (UART)                │  │
│  └────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼
              ┌───────────────────────┐
              │   STM32 + Cs Sensor   │
              └───────────────────────┘
```

**Задачи:**
- [x] Разработка конфигурации модуля (config.py)
- [x] Реализация драйвера STM32 (stm32_driver.py)
- [x] Основной класс магнитометра (cesium_magnetometer.py)
- [x] Интеграция Hailo 8L (hailo_processor.py)
- [x] Расширение BlueOS (blueos_extension.py)
- [x] Точка входа и CLI (main.py)
- [x] Unit-тесты (test_magnetometer.py)
- [ ] Интеграционные тесты с реальным оборудованием

### 7.3. AI-модели для Hailo 8L

**Задачи:**
- [ ] Сбор обучающих данных (магнитные аномалии)
- [ ] Разработка модели шумоподавления (1D CNN)
- [ ] Разработка модели обнаружения аномалий
- [ ] Конвертация в формат HEF для Hailo
- [ ] Оптимизация для edge-инференса

**Модели:**
```
1. Denoise Model (1D CNN):
   Input:  [batch, 256, 1] - временной ряд
   Output: [batch, 256, 1] - очищенный сигнал

2. Anomaly Detector (1D CNN + Classifier):
   Input:  [batch, 256, 1] - временной ряд
   Output: [batch, 4] - вероятности классов:
           [normal, ferrous, geological, infrastructure]
```

### 7.4. Интеграция с BlueOS

**Задачи:**
- [x] REST API для доступа к данным
- [x] WebSocket для потоковой передачи
- [ ] MAVLink телеметрия (MAVLINK_MSG_ID_SCALED_PRESSURE)
- [ ] Интеграция с навигационной системой
- [ ] Логирование в формате BlueOS

---

## Временная шкала проекта

```
2014        2015        2016        2017        2018        2025        2026
|-----------|-----------|-----------|-----------|-----------|-----------|
[=== НИР ===]
            [======== ОКР ========]
                        [=== Испытания ===]
                                    [= Документы =]
                                    [=== Внедрение ===]
                                                            [= Магнитометр =]
                                                                        [AI]
```

---

## Ключевые вехи (Milestones)

| # | Веха | Срок | Статус |
|---|------|------|--------|
| 1 | Завершение теоретического обоснования | 2014 Q4 | Выполнено |
| 2 | Разработка принципиальной схемы | 2015 Q1 | Выполнено |
| 3 | Изготовление рабочей модели передатчика | 2015 Q2 | Выполнено |
| 4 | Изготовление кабеля 1240 м | 2015 Q3 | Выполнено |
| 5 | Лабораторные испытания системы | 2016 Q1 | Выполнено |
| 6 | Интеграция с подводным аппаратом | 2016 Q2 | В процессе |
| 7 | Получение сертификатов | 2016 Q4 | Ожидание |
| 8 | Оформление патентов | 2017 Q2 | Планируется |
| 9 | Запуск опытной серии | 2017 Q4 | Планируется |

---

## Риски и проблемы

### Технические риски

| Риск | Вероятность | Влияние | Митигация |
|------|-------------|---------|-----------|
| Не достигнута требуемая дальность | Средняя | Высокое | Подбор частоты, улучшение кабеля |
| Превышение габаритов передатчика | Высокая | Среднее | Переход на планарные схемы |
| Перегрев электроники | Средняя | Высокое | Теплоотвод, принудительное охлаждение |
| Излучение ЭМ помех | Низкая | Среднее | Экранирование, выбор частоты |

### Организационные риски

| Риск | Вероятность | Влияние | Митигация |
|------|-------------|---------|-----------|
| Задержки поставок от партнёров | Высокая | Среднее | Альтернативные поставщики |
| Недостаток финансирования | Средняя | Высокое | Поэтапное финансирование |
| Изменение требований заказчика | Средняя | Среднее | Доп. соглашения к договору |

---

## Бюджет проекта (оценка)

| Статья | Сумма (руб.) |
|--------|-------------|
| НИОКР (договор с ВИЭСХ) | 160 000 |
| Изготовление кабеля (ОКБ КП) | 80 000 |
| Комплектующие электроники | 50 000 |
| Испытания и сертификация | 100 000 |
| Патентование | 80 000 |
| **Итого** | **470 000** |

---

## Контрольные точки договора

### По договору с ВИЭСХ:

1. **Начало работ:** Подписание договора, аванс 50%
2. **Промежуточная точка:** Представление рабочей модели
3. **Завершение:** Акт сдачи-приёмки работ

### Документы к сдаче:

- [ ] Акт сдачи-приёмки работы (3 экз.)
- [ ] Комплект документации по ТЗ
- [ ] Паспорт на систему
- [ ] Комплект оборудования 200 Вт

### Условия приёмки:

При мотивированном отказе — двухсторонний акт с перечнем доработок и календарным планом (10 дней на составление, доработки без доп. оплаты).

---

## Следующие шаги (Action Items)

### Немедленно:

1. [ ] Привезти робота в ВИЭСХ для интеграции
2. [ ] Забрать документацию от Юферева
3. [ ] Получить схемы и паспорт устройства
4. [ ] Испытать кабель с медью внутри

### В течение месяца:

1. [ ] Подписать доп. соглашение о патентовании
2. [ ] Встреча с директором ВИЭСХ Стребковым
3. [ ] Испытания на воде с подводным аппаратом
4. [ ] Получить бумаги об испытании от ВИЭСХ

### В течение квартала:

1. [ ] Завершить интеграцию с ROV
2. [ ] Оформить сертификаты
3. [ ] Подготовить материалы для выставки
4. [ ] Опубликовать совместную статью с ВИЭСХ

---

*Документ подготовлен на основе анализа технического задания и рабочей переписки проекта.*

*Дата: 2024*
*Версия: 1.0*
